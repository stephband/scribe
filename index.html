<!DOCTYPE html>
<html lang="en">
<head>
    <title>&lt;scribe-music&gt;</title>

    <meta charset="utf-8" />
    <meta name="author" content="@stephband" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width" />

    <!--script type="importmap">{
        "imports": {
            "bolt/":     "https://cdn.jsdelivr.net/gh/stephband/bolt-2@latest/",
            "dom/":      "https://cdn.jsdelivr.net/gh/stephband/dom@1.4.1/modules/",
            "fn/":       "https://cdn.jsdelivr.net/gh/stephband/fn@1.5.1/modules/",
            "midi/":     "https://cdn.jsdelivr.net/gh/stephband/midi@1.1.0/modules/",
            "sequence/": "https://cdn.jsdelivr.net/gh/soundio/sequence@0.1.0/modules/"
        }
    }</script-->

    <script type="importmap">{
        "imports": {
            "bolt/":     "/bolt/",
            "dom/":      "/dom/modules/",
            "fn/":       "/fn/modules/",
            "midi/":     "/midi/modules/",
            "sequence/": "/sequence/modules/"
        }
    }</script>

    <script title="load">
        document.documentElement.className += ' js loading';
        // window.addEventListener('DOMContentLoaded', () => document.documentElement.classList.remove('content-loading'));
        // Wait for other load handlers to run first - Bolt does a few things on
        // load (eg. targetable scrolls) and we want them to run before the loading
        // class is removed
        window.addEventListener('load', () => window.requestAnimationFrame(() => document.documentElement.classList.remove('loading')));
        window.DEBUG = true;
    </script>

    <!-- Import <scribe-music> -->
    <link rel="stylesheet" href="./scribe-music/element.css" />
    <script type="module" src="./scribe-music/element.js"></script>

    <style>
    @import 'https://cdn.jsdelivr.net/gh/stephband/bolt-2@latest/elements/html.css';
    @import 'https://cdn.jsdelivr.net/gh/stephband/bolt-2@latest/classes/atoms.css';

    @import './build/scribe-music/element.css';
    @import './fonts/ash.css';
    @import './fonts/bravura.css';
    @import './fonts/broadway.css';
    @import './fonts/leipzig.css';
    @import './fonts/petaluma.css';

    body {
        font-family: system-ui, sans-serif;
        margin: 0;
        padding: 0;
    }

    pre {
        font-family: MartianMono, monospace;
    }

    .orange-fg { font-weight: 600; color: oklch(0.54 0.19 41.4); }
    .yellow-fg { font-weight: 600; color: oklch(0.62 0.15 95.97); }
    .lime-fg   { color: oklch(0.2 0.11 297.09); }


    .ash-font      { font-family: Ash, AshText; }
    .bravura-font  { font-family: Bravura, BravuraText; }
    .broadway-font { font-family: Broadway, BroadwayText; }
    .jazz-font     { font-family: Jazz, JazzText; }
    .petaluma-font { font-family: Petaluma, PetalumaText; }
    .leipzig-font  { font-family: Leipzig; }

    h1.ash-font,
    h1.bravura-font,
    h1.broadway-font,
    h1.jazz-font,
    h1.petaluma-font { height: 1.5em; line-height: 2em; }

    h2.ash-font,
    h2.bravura-font,
    h2.broadway-font,
    h2.jazz-font,
    h2.petaluma-font { height: 1.5em; line-height: 2em; }

    h3.ash-font,
    h3.bravura-font,
    h3.broadway-font,
    h3.jazz-font,
    h3.petaluma-font { height: 1.5em; line-height: 2em; }

    h4.ash-font,
    h4.bravura-font,
    h4.broadway-font,
    h4.jazz-font,
    h4.petaluma-font { height: 1.5em; line-height: 2em; }

    .header-section > pre {
        margin-top: 3em;
    }

    .header-section > scribe-music {
        margin-top: 3em;
    }

    .style-section {
        min-height: 50vw;
        color: white;
        background-color: #414c73;
        background-image: url('./assets/images/trees.avif');
        background-position: 0% 43%;
        background-size: 120%;
    }

    .style-section > scribe-music {
        font-size: calc(1.5vw + 1rem);
        color: #8c637b;
        mix-blend-mode: color-dodge;
    }

    .font-section {
        color: color(display-p3 0.451 0.656 0.797);
        color: oklch(0.74 0.07 228.72);
        background-color: color(display-p3 0.075 0.342 0.397);
        background-image: linear-gradient(340deg, color(display-p3 0.075 0.342 0.397), color(display-p3 0.113 0.181 0.252));
    }

    .font-section > scribe-music {
        font-size: calc(0.75vw + 0.5rem);
    }

    .stave-section > scribe-music {
        font-size: calc(1.125vw + 0.75rem);
    }
    </style>

    <script type="application/json" id="a-fond">{
        "events": [
            [0, "key",   0],
            [0, "meter", 3, 1.5],
            [0, "sequence", 1, 0, 6]
        ],

        "sequences": [{
            "id": 1,
            "name": "Phrase 1",
            "events": [
                [0,    "chord", "C", "∆", 3],
                [0,    "lyric", "A", 1],
                [0,    "note", "E5", 0.1, 1],
                [0,    "note", "C3", 0.1, 1.5],
                [1,    "lyric", "fond", 0.5],
                [1,    "note", "E5", 0.1, 0.5],
                [1.5,  "lyric", "kiss", 1.5],
                [1.5,  "note", "G5", 0.1, 1.5],
                [1.5,  "note", "E2", 0.1, 1.5],

                [3,    "chord", "F", "∆", 1.5],
                [3,    "lyric", "then", 1],
                [3,    "note",  "F2", 0.1, 1.5],
                [3,    "note",  "A4", 0.1, 1],
                [4,    "lyric", "we", 0.5],
                [4,    "note",  "G4", 0.1, 0.5],

                [4.5,  "chord", "A", "-7", 1.5],
                [4.5,  "lyric", "sev –", 0.25],
                [4.5,  "note",  "A4", 0.1, 0.25],
                [4.5,  "note",  "A2", 0.1, 1.5],
                [4.75, "note", "C5", 0.1, 1.25],
                [4.75, "lyric", "er", 1.25]
            ]
        }]
    }</script>
    <script type="application/json" id="fare-thee">{
        "events": [
            [0, "key",   0],
            [0, "meter", 3, 1.5],
            [0, "sequence", 1, 2, 6],
            [0, "sequence", 2, 0, 6]
        ],

        "sequences": [{
            "id": 1,
            "name": "Melody",
            "events": [
                [0,    "lyric", "Fare", 1],
                [0,    "note", "A5", 0.1, 1],
                [1,    "lyric", "thee", 0.5],
                [1,    "note", "A5", 0.1, 0.5],

                [1.5,  "lyric", "well", 1],
                [1.5,  "note", "C6", 0.1, 1],
                [2.5,  "lyric", "and", 0.5],
                [2.5,  "note", "D6", 0.1, 0.5],

                [3,    "lyric", "then", 1],
                [3,    "note", "G5", 0.1, 1],
                [4,    "lyric", "for –", 0.5],
                [4,    "note", "A5", 0.1, 0.5],

                [4.5,  "lyric", "ev –", 0.5],
                [4.5,  "note", "E5", 0.1, 0.5],
                [5,    "lyric", "er", 1],
                [5,    "note", "G5", 0.1, 1]
            ]
        }, {
            "id": 2,
            "name": "Phrase 2",
            "events": [
                [0,    "chord", "F", "∆", 1.5],
                [0,    "note", "A4", 0.1, 1],
                [0,    "note", "E4", 0.1, 1],
                [0,    "note", "D4", 0.1, 1],
                [0,    "note", "C4", 0.1, 1],
                [0,    "note", "F3", 0.1, 1.5],

                [1.5,  "chord", "D", "-7", 1],
                [1.5,  "note", "G4", 0.1, 1],
                [1.5,  "note", "F4", 0.1, 1],
                [1.5,  "note", "E4", 0.1, 1],
                [1.5,  "note", "A3", 0.1, 1.5],
                [1.5,  "note", "D3", 0.1, 1.5],

                [3,    "chord", "G", "7sus", 1.5],
                [3,    "note", "D5", 0.1, 1],
                [3,    "note", "A4", 0.1, 1],
                [3,    "note", "F4", 0.1, 1],
                [3,    "note", "C4", 0.1, 1.5],
                [3,    "note", "G3", 0.1, 1.5],

                [4.5,  "chord", "C", "∆", 1.5],
                [4.5,  "note", "D5", 0.1, 0.5],
                [4.5,  "note", "G4", 0.1, 0.5],
                [4.5,  "note", "F4", 0.1, 0.5],
                [4.5,  "note", "G3", 0.1, 1.5],
                [4.5,  "note", "C3", 0.1, 1.5]
            ]
        }]
    }</script>
    <script type="application/json" id="thine-be">{
        "events": [
            [0, "key",   0],
            [0, "meter", 3, 1.5],
            [0, "sequence", 1, 2, 6],
            [0, "sequence", 2, 0, 6]
        ],

        "sequences": [{
            "id": 1,
            "name": "Melody",
            "events": [
                [0,    "lyric", "Thine", 1],
                [0,    "note", "F5", 0.1, 1],
                [1,    "lyric", "be", 0.5],
                [1,    "note", "A5", 0.1, 0.5],

                [1.5,  "lyric", "ilk", 1],
                [1.5,  "note", "C6", 0.1, 1],
                [2.5,  "lyric", "a", 0.5],
                [2.5,  "note", "D6", 0.1, 0.5],

                [3,    "lyric", "joy", 1],
                [3,    "note", "G5", 0.1, 1],
                [4,    "lyric", "I", 0.5],
                [4,    "note", "E5", 0.1, 0.5],

                [4.5,  "lyric", "pledge", 0.5],
                [4.5,  "note", "A4", 0.1, 0.5],
                [5,    "lyric", "thee", 1],
                [5,    "note", "C5", 0.1, 1]
            ]
        }, {
            "id": 2,
            "name": "Phrase 2",
            "events": [
                [0,    "chord", "F", "∆", 1.5],
                [0,    "note", "F3", 0.1, 1.5],

                [1.5,  "chord", "D", "-7", 1],
                [1.5,  "note", "D3", 0.1, 1.5],

                [3,    "chord", "C", "∆", 1.5],
                [3,    "note", "C3", 0.1, 1.5],

                [4.5,  "chord", "A", "-7", 1.5],
                [4.5,  "note", "A2", 0.1, 1.5]
            ]
        }]
    }</script>

    <script type="application/json" id="where-in">{
        "events": [
            [0, "key",   0],
            [0, "meter", 3, 1.5],
            [0, "sequence", 1, 2, 9],
            [0, "sequence", 2, 0, 9]
        ],

        "sequences": [{
            "id": 1,
            "name": "Melody",
            "events": [
                [0,    "lyric", "Where", 1],
                [0,    "note", "E5", 0.1, 1],
                [1,    "lyric", "in", 0.5],
                [1,    "note", "D5", 0.1, 0.5],

                [1.5,  "lyric", "time", 1],
                [1.5,  "note", "E5", 0.1, 1],
                [2.5,  "lyric", "and", 0.5],
                [2.5,  "note", "A5", 0.1, 0.5],

                [3,    "lyric", "hope", 1],
                [3,    "note", "G5", 0.1, 1],
                [4,    "lyric", "I", 0.5],
                [4,    "note", "E5", 0.1, 0.5],

                [4.5,  "lyric", "wage", 1.5],
                [4.5,  "note", "D5", 0.1, 1.5],
                [6,    "lyric", "thee", 1],
                [6,    "note", "C5", 0.1, 1]
            ]
        }, {
            "id": 2,
            "name": "Phrase 2",
            "events": [
                [0,    "chord", "C", "∆", 1.5],
                [0,    "note", "E3", 0.1, 1.5],

                [1.5,  "chord", "F", "∆", 1.5],
                [1.5,  "note", "F3", 0.1, 1.5],

                [3,    "chord", "G", "7sus", 1.5],
                [3,    "note", "G3", 0.1, 3],

                [4.5,  "chord", "G", "7", 1.5],

                [6,    "chord", "C", "∆", 3],
                [6,    "note", "C3", 0.1, 3]
            ]
        }]
    }</script>
</head>
<body>
    <header class="header-section 9x-grid grid" style="padding: 3em; --y-gap: 0em;">
        <h1 class="x2 6x">Scribe <span class="font-08">0.4</span></h1>
        <p class="x2 6x">
            Scribe is a new, CSS-powered technique for displaying music notation on the web, packaged in a custom element you can drop into a document.
            It is perfect for embedding examples into tutorials, for publishing music to be read on a phone at a gig, or for live feedback of, say, MIDI input in a web app.
        </p>
        <pre class="x2"><span class="orange-fg">&lt;scribe-music</span> <span class="yellow-fg">src="</span><span class="lime-fg">./blue-in-green.json</span><span class="orange-fg">"&gt;&lt;/scribe-music&gt;</span></pre>
        <scribe-music class="x1 9x" clef="treble" src="./data/blue-in-green.json"></scribe-music>
    </header>

    <section class="9x-grid grid" style="padding: 3em; --y-gap: 0em;">
        <h2 class="x2 6x">Fluid and responsive</h2>
        <p class="x2 6x">
        Scribe is laid out using flex and grid, sized in relative font sizes, and generally embraces the flow of the web, making it readable.
        And because it's all CSS it's highly&nbsp;customisable.
        </p>
    </section>

    <section class="style-section 9x-grid grid y-start-grid" style="padding: 3em; --y-gap: 0em;">
        <h2 class="x2 6x">Highly styleable</h2>
        <p class="x2 6x">Scribe is laid out using flex and grid, and sized in relative font sizes, and because it's all CSS it's highly&nbsp;customisable, in ways that image-based notation renderers can't match.</p>
        <scribe-music class="x2 no-wrap" clef="drum" src="./data/drum-pattern.json"></scribe-music>
        <pre class="x2">mix-blend-mode: color-dodge;</pre>
    </section>

    <section class="font-section 9x-grid grid" style="padding: 3em;">
        <h2 class="x2 6x">SMuFL fonts</h2>
        <p class="x2 6x">
            Scribe supports <a href="https://w3c.github.io/smufl/latest/">SMuFL fonts</a>, W3C-standardised fonts for rendering musical symbols.
            It comes tested with 5 openly licensed SMuFL fonts out of the box.
            Changing the look of your music can be as simple as importing and setting a new font family.
        </p>

        <div class="x1 4x y5">
            <h3 class="petaluma-font">Petaluma</h3>
            <pre>font-family: Petaluma, PetalumaText;</pre>
        </div>
        <scribe-music class="x1 4x y3 2y petaluma-font no-wrap" clef="piano" src="#a-fond"></scribe-music>
        <div class="x5 4x y3">
            <h3 class="bravura-font">Bravura</h3>
            <pre>font-family: Bravura, BravuraText;</pre>
        </div>
        <scribe-music class="x5 4x y4 2y bravura-font no-wrap" clef="piano" src="#fare-thee"></scribe-music>
        <div class="x2 4x y8">
            <h3 class="broadway-font">Broadway</h3>
            <pre>font-family: Broadway, BroadwayText;</pre>
        </div>
        <scribe-music class="x2 4x y6 2y broadway-font no-wrap" clef="piano" src="#thine-be"></scribe-music>
        <div class="x6 4x y6">
            <h3 class="ash-font">Ash</h3>
            <pre>font-family: Ash, AshText;</pre>
        </div>
        <scribe-music class="x6 4x y7 2y ash-font no-wrap" clef="piano" src="#where-in"></scribe-music>
    </section>

    <section class="stave-section 9x-grid grid" style="padding: 3em; --y-gap: 0em;">
        <h2 class="x2 6x">6 Staves</h2>
        <p class="x2 6x">Comes with 6 stave types – treble, bass, piano, violin, drum and percussion staves. Plus, the set of staves is extensible – it is possible to define your own.</p>
        <scribe-music class="x3 2x y3 jazz-font no-wrap" clef="drum" src="./data/drum-pattern.json"></scribe-music>
    </section>

    <section class="stave-section 9x-grid grid" style="padding: 3em; --y-gap: 0em;">
        <h2 class="x2 6x">Current status</h2>
        <p class="x2 6x">
            Scribe is a new way of rendering music on the web, and as a new project it has some rough edges.
            The current version, Scribe 0.4, is capable of rendering a reasonable lead sheet.
            You can see some examples of that on <a href="https://the-dots.app">the-dots.app</a>.
            It is also ideal for, say, embedding musical examples in a blog post.
            Or writing charts that musicians can read on their phones at a gig.
        </p>
        <p class="x2 6x">
            Here are some features that yet to be worked out in a future version:
        </p>
        <ul class="x2 6x">
            <li>Dynamics – accent and dynamic markings</li>
            <li>Staccato and Long note detection</li>
            <li>Scores – aligned display of multiple parts</li>
        </ul>
        <p class="x2 6x">If you are good at JS and CSS and want to help out, please do get in touch.</p>
    </section>

    <section class="stave-section 9x-grid grid" style="padding: 3em; --y-gap: 0em;">
        <h2 class="x2 6x">Try it out in a web page</h2>
    </section>

    <section class="stave-section 9x-grid grid" style="padding: 3em; --y-gap: 0em;">
        <h2 class="x2 6x">Writing a Scribe document</h2>
    </section>

    <footer>
        About the author
        Stephen is a saxophonist and
    </footer>
</body>
</html>

/* Scribe 
   0.3.1
   By Stephen */

import{a as C,b as E,c as Et,d as F,e as k,f as R,g as Tt,h as At,i as Y,j as St}from"../modules/chunk-ZGEJE77H.js";var p,S;function Zt(e,t){let n=-1;for(;e[++n]&&e[n]!==t;);for(;e[n++];)e[n-1]=e[n]}function st(e){let t=0;for(;e[--t];)e[t].stop&&e[t].stop(),e[t]=void 0}function L(e,t){let n=0;for(;t[--n]&&t[n]!==e;);for(t[n]=e,n=-1;e[++n]&&e[n]!==t;);e[n]=t}function j(e){let t=-1,n;for(;n=e[++t];)e[t]=void 0,n.invalidate(e)}function it(e,t){let n=0;for(;e[--n];)if(e[n]===t)return!0}var c=class e{static isSignal(t){return t instanceof e}static of(t){return new Z(t)}static from(t,n){if(t.then){let s=e.of();return t.then(i=>s.value=i),s}return t.pipe?t.pipe(new _):new M(t,n)}static compute(t,n){return new M(t,n)}static fromProperty(t,n){return new tt(t,n)}static frame(t){return new N(t)}static tick(t){return new P(t)}static temporal(t,n){return new et(t,n)}static evaluate(t,n,s=t){let i=p;p=t,i||(S=!1);let a=n.apply(s);return p=i,a}static get hasInvalidDependency(){return S}static get evaluating(){return p}constructor(t){t&&(this.name=t)}valueOf(){return this.value}toString(){return this.value+""}toJSON(){return this.value}},Z=class extends c{#t;constructor(t){super(),this.#t=t}get value(){return p&&L(this,p),this.#t}set value(t){this.#t!==t&&(this.#t=t,j(this))}},_=class extends c{#t;constructor(t){super(),this.#t=t}get value(){return p&&L(this,p),this.#t}push(t){this.#t!==t&&(this.#t=t,j(this))}},tt=class extends c{#t;#e;constructor(t,n){super(t),this.object=n}evaluate(){return this.object[this.name]}get value(){return p&&L(this,p),this.#t?this.#e:(this.#e=c.evaluate(this,this.evaluate,this),S||(this.#t=!0),this.#e)}set value(t){if(this.#e===t)return;let{object:n,name:s}=this;n[s]=t,t=n[s],this.#e!==t&&(this.#e=t,j(this))}invalidate(t){this.#t&&(t&&!it(this,t)||(this.#t=!1,st(this),j(this)))}},M=class extends c{#t;#e;#n;#s;constructor(t,n){super(),this.#t=t,this.#e=n}get value(){return p&&L(this,p),this.#n?this.#s:(this.#s=c.evaluate(this,this.#t,this.#e),S||(this.#n=!0),this.#s)}invalidate(t){this.#n&&(t&&!it(this,t)||(this.#n=!1,st(this),j(this)))}},et=class extends c{#t=0;constructor(t,n){super(t),this.object=n}getTime(){return window.performance.now()}evaluate(){return this.object[this.name]}get value(){return c.evaluating&&(L(this,p),this.getTime()<this.#t&&(S=!0)),this.evaluate()}set value(t){console.warn("Dont really want to be setting value of TimedSignal"),console.trace(),this.object[this.name]!==t&&(this.object[this.name]=t,invalidateUntil(this.getTime()))}invalidateUntil(t){let s=this.getTime()>=this.#t;this.#t=t,s&&j(this)}},I=class extends c{constructor(t){if(super(),p){let n=0;for(;p[--n]&&p[n]!==this;);p[n]=this}t&&(this.evaluate=t,(c.evaluate(this,this.evaluate)||S)&&this.cue())}invalidate(t){this.constructor.observers.indexOf(this)===-1&&(t&&!it(this,t)||(st(this),this.cue()))}stop(){let t=0,n;for(;n=this[--t];){let a=-1;this[t]=void 0,n.stop?n.stop():Zt(n,this)}let s=this.constructor.observers,i=s.indexOf(this);if(i!==-1){if(s===nt)throw new Error("Attempt to remove observer while observers is rendering");s.splice(i,1)}return this}valueOf(){return this}toString(){return"[object Signal]"}toJSON(){}},nt;function qt(e){let t=-1,n;for(nt=e;n=e[++t];)!c.evaluate(n,n.evaluate)&&!S&&e.splice(t--,1);return nt=void 0,e}var Bt=Promise.resolve();function kt(){qt(P.observers).length&&Bt.then(kt)}var P=class extends I{static observers=[];cue(){let t=this.constructor.observers;t.length||Bt.then(kt),t.push(this)}};function Rt(){qt(N.observers).length&&requestAnimationFrame(Rt)}var N=class extends I{static observers=[];cue(){let t=this.constructor.observers;t.length||window.requestAnimationFrame(Rt),t.push(this)}};function rt(e,t,n){let s;typeof n!="string"&&n.input!==void 0&&n.index!==void 0&&(s=n,n=s.input.slice(n.index+n[0].length+(n.consumed||0)));let i=e.exec(n);if(!i)return;let a=t(i);return s&&(s.consumed=(s.consumed||0)+i.index+i[0].length+(i.consumed||0)),a}var Pe=F(rt,!0);function _t(e,t,n){throw n.input!==void 0&&n.index!==void 0&&(n=n.input),new Error('Cannot parse string "'+(n.length>128?n.length.slice(0,128)+"…":n)+'"')}function te(e,t,n){let s=-1;for(;++s<n.length;)t=n[s]!==void 0&&e[s]?e[s](t,n):t;return e.done?e.done(t,n):e.close?e.close(t,n):t}function ee(e,t,n,s){let i=rt(e,a=>te(t,n,a),s);return i===void 0?t.catch?t.catch(n,s):_t(e,t,s):i}var jt=F(ee,!0);var Dt=Symbol("internals");function ot(e,t,n){return t[Dt]=t.attachInternals&&!t.getAttribute("is")?t.attachInternals():{shadowRoot:n}}function o(e){return e[Dt]}var Ot=Object.defineProperties;var at={},ne={name:{set:function(e){return this.setAttribute("name",e)},get:function(){return this.getAttribute("name")||""}},form:{get:function(){return o(this).form}},labels:{get:function(){return o(this).labels}},validity:{get:function(){return o(this).validity}},validationMessage:{get:function(){return o(this).validationMessage}},willValidate:{get:function(){return o(this).willValidate}},checkValidity:{value:function(){return o(this).checkValidity()}},reportValidity:{value:function(){return o(this).reportValidity()}}},ct=!1,se=jt(/^\s*<?([a-z][\w]*-[\w-]+)>?\s*$|^\s*<?([a-z][\w]*)\s+is[=\s]*["']?([a-z][\w]*-[\w-]+)["']?>?\s*$/,{1:(e,t)=>({name:t[1]}),2:(e,t)=>({name:t[3],tag:t[2]}),catch:function(e,t){throw new SyntaxError(`dom element() – name must be of the form 'element-name' or 'tag is="element-name"' (`+t+")")}},null),Ct={once:!0};function ie(e){return e.sheet?Promise.resolve({target:e}):new Promise((t,n)=>{e.addEventListener("load",t,Ct),e.addEventListener("error",n,Ct)})}function re(e){e.stop()}function oe(e){if(at[e])return at[e];let t=document.createElement(e).constructor;if(t===HTMLUnknownElement)throw new Error("Cannot define customised built-in - constructor for <"+e+"> is HTMLUnknownElement");return at[e]=t}function ae(e,t){if(e.hasOwnProperty(t)){let n=e[t];delete e[t],e[t]=n}return e}function Lt(e,t){let n=e.attachShadow({mode:t.mode||"closed",delegatesFocus:t.focusable||!1});if(t.stylesheet){let s=R("link",{rel:"stylesheet",href:t.stylesheet});n.append(s)}return n}function ce(e,t){return typeof t=="string"?t[0]==="#"?e.appendChild(document.getElementById(t.slice(1)).content.clone(!0)):e.innerHTML=t:e.appendChild(t.content.clone(!0)),e}function ue(e){let t=e.isUpgraded;return e.isUpgraded=!0,!t}function Ut(e,t){return Array.from(e.querySelectorAll('[is="'+t+'"]')).filter(ue)}var le=E((e,t)=>typeof t,{object:(e,t)=>t,function:(e,t)=>({value:t}),default:(e,t)=>{throw new TypeError("element() does not accept property descriptor of type "+typeof t)}});function ut(e,t={},n={},s=""){let{name:i,tag:a}=se(e),w=typeof a=="string"?oe(a):HTMLElement,v=[],d={},x,b;for(x in n)b=le(x,n[x]),b.attribute&&v.push(x),(b.set||b.get||"value"in b)&&(d[x]=b),n[x]=b;function l(){let r=Reflect.construct(w,arguments,l),u=t.mode||typeof t.shadow=="string"?Lt(r,t):void 0;t.shadow&&ce(u,t.shadow);let g=ot(l,r,u);return a&&(ct=!0),t.construct&&t.construct.call(r,u,g),Object.keys(d).reduce(ae,r),r}if(l.prototype=Object.create(w.prototype,d),n.value&&(l.formAssociated=!0,Ot(l.prototype,ne),(t.enable||t.disable)&&(l.prototype.formDisabledCallback=function(r){let u=o(this);return r?t.disable&&t.disable.call(this,u.shadowRoot,u):t.enable&&t.enable.call(this,u.shadowRoot,u)}),t.reset&&(l.prototype.formResetCallback=function(){let r=o(this);return t.reset.call(this,r.shadowRoot,r)}),t.restore&&(l.prototype.formStateRestoreCallback=function(){let r=o(this);return t.restore.call(this,r.shadowRoot,r)})),v.length&&(l.observedAttributes=v,l.prototype.attributeChangedCallback=function(r,u,g){return n[r].attribute.call(this,g)}),t.connect&&(l.prototype.connectedCallback=function(){let r=o(this),u=r.shadowRoot;if(r.stopable=t.connect.call(this,u,r),!u)return;let g=u.querySelectorAll('link[rel="stylesheet"]');if(g.length){let f=R("style","*:not(slot), slot:not([name]) { display: none !important; }");u.prepend(f);let T;r.loadPromise?T=r.loadPromise.then(()=>new Promise(requestAnimationFrame)):T=r.loadPromise=Promise.all(Array.from(g,ie)),T.finally(()=>{f.remove(),t.load&&t.load.call(this,u,r)})}else t.load&&t.load.call(this,u,r)}),l.prototype.disconnectedCallback=function(){let r=o(this);r.stopable&&(r.stopable.stop?r.stopable.stop():r.stopable.forEach(re)),t.disconnect&&t.disconnect.call(this,r.shadowRoot,r)},window.console&&window.console.log("%c<"+(a?a+" is="+i:i)+">%c "+s,"color:#3a8ab0;font-weight:600;","color:#888888;font-weight:400;"),window.customElements.define(i,l,a&&{extends:a}),a&&!ct){let r=document.createElement("div");if(r.style.position="fixed",r.style.left="-1000px",r.style.top="-1000px",r.innerHTML="<"+a+' is="'+i+'"></'+a+">",document.body.append(r),r.remove(),ct)l.polyfillByRoot=k;else{let u=function(f){let T={};Object.keys(d).forEach(A=>{f[A]!==void 0&&(T[A]=f[A])}),Ot(f,d);let G=t.mode||t.shadow?Lt(f,t):void 0,xt=ot(l,f,G);t.construct&&t.construct.call(f,G,xt),Object.assign(f,T);let Yt=-1,Q;for(;Q=v[++Yt];){let A=f.attributes[Q];A&&n[Q].attribute.call(f,A.value)}t.connect&&t.connect.call(f,G,xt)},g=function(f){Ut(f,i).forEach(u),new MutationObserver(()=>Ut(f,i).forEach(u)).observe(f,{childList:!0,subtree:!0})};l.polyfillByRoot=g,g(document)}}else l.polyfillByRoot=k;return l}var H=e=>typeof e;var fe=Object.defineProperties,Gt=E(H,{function:e=>e(),object:e=>e.stop()}),q=class extends C{#t;stop(){if(this.status==="done")return this;this.status="done";let t=this.#t;return this.#t=void 0,t&&t.forEach(Gt),this}done(t){return this.status==="done"?(Gt(listener),this):((this.#t||(this.#t=[])).push(t),this)}};fe(q.prototype,{status:{writable:!0}});function pe(e){throw new TypeError("Stream cannot be created .from() "+typeof e)}function m(e,t){if(t===void 0)return;let n=-1;for(;e[++n];)e[n].push(t);return e}function he(e){q.prototype.stop.apply(e);let t=-1,n;for(;n=e[++t];)e[t]=void 0,n.stop&&(vt(n,e),n[-1]||n.stop());return e}function vt(e,t){let n=0;for(;e[--n]&&e[n]!==t;);for(;e[n--];)e[n+1]=e[n]}function Ft(e,t){let n=-1;for(;e[++n]&&e[n]!==t;);for(;e[n++];)e[n-1]=e[n]}function de(e,t){vt(t,e),Ft(e,t)}var U=class extends q{stop(){if(this.status==="done")return this;let t;for(;t=this[-1];){let n=-1;for(;this[n--];)this[n+1]=this[n];Ft(t,this),t.stop&&!t[0]&&t.stop(t)}return super.stop()}},X=class extends U{constructor(t){super(),this.push=t}},z=class extends U{constructor(t,n){super(),this.fn=t,this.value=n,this.i=0}push(t){let n=this.fn;this.value=n(this.value,t,this.i++,this)}},h=class extends U{start(){if(this.status)return this;let t=0,n;t:for(;n=this[--t];){let s=-1;for(;n[++s];)if(n[s]===this)continue t;n[s]=this,s===0&&n.start&&n.start()}return this}stop(){if(this.status==="done")return this;super.stop();let t=-1,n;for(;n=this[++t];)this[t]=void 0,n.stop&&(vt(n,this),n[-1]||n.stop());return this}pipe(t){if(t.stop){let s=0;for(;t[--s]&&t[s]!==this;);t[s]=this}if(t.start&&!(t[0]||t.status==="running"))return t;let n=-1;for(;this[++n]&&this[n]!==t;);return this[n]=t,n||this.start(),t}each(t){return this.pipe(new X(t))}buffer(...t){return this.pipe(new D(t))}filter(t){return this.pipe(new ft(t))}flatMap(t){return this.pipe(new pt(t))}map(t){return this.pipe(new V(t))}reduce(t,n){return this.pipe(new z(t,n)).value}scan(t,n){return this.pipe(new dt(t,n))}slice(t,n){return this.pipe(new mt(t,n))}split(t){return this.pipe(new wt(t))}[Symbol.asyncIterator]=async function*(){let t=[],n=i=>t.push(i);function s(i,a){n=i}for(this.each(i=>n(i)).done(()=>n=k);n!==k;)yield t.length?t.shift():await new Promise(s)};static from=E(H,{function:t=>new V(t),object:t=>typeof t.pipe=="function"?t:typeof t.then=="function"?new lt(t):typeof t.length=="number"?new D(Array.from(t)):pe(t)});static of(...t){return t.length<2?new J(t[0]):new D(t)}static buffer(t){return new D(t)}static value(t){return new J(t)}static merge(...t){return new ht(t)}static push=m;static stop=he;static unpipe=de;static each(t){return new X(t)}static reduce(t,n){return new z(t,n)}},lt=class extends h{constructor(t){super(),this.promise=t}start(){return this.promise.then(t=>m(this,t)).finally(()=>this.stop()),this}},J=class extends h{constructor(t){super(),this.value=t}start(){return this.value!==void 0&&(m(this,this.value),this.status==="done")?this:super.start()}push(t){return this.value=t,m(this,t)}},D=class extends h{constructor(t){super(),this.values=t||[]}start(){let t=this.values;if(!t)return super.start();let n=-1;for(;n++<t.length;)if(m(this,t[n]),this.status==="done")return this;return this.values=void 0,super.start()}push(t){return this.value=t,this.values?this.values.push(this.value):m(this,this.value)}},ft=class extends h{constructor(t){super(),this.fn=t}push(t){let n=this.fn;return n(t)&&m(this,t)}},pt=class extends h{constructor(t){super(),this.fn=t}push(t){let n=this.fn,s=n(t);if(s!==void 0)if(isIterable(s))for(let i of s)m(this,i);else s.pipe?(console.warn("FlatMapping pipeables is dodgy. Map to arrays for the moment please."),this.done(s.each(i=>m(this,i)))):s.then&&s.then(i=>m(this,i))}},V=class extends h{constructor(t){super(),this.fn=t}push(t){let n=this.fn,s=n(t);return s!==void 0&&m(this,s)}},ht=class extends h{constructor(t){super(),this.inputs=t}push(t){return m(this,t)}pipe(t){let n=-1,s;for(;s=this.inputs[++n];)h.from(s).pipe(this);return h.prototype.pipe.call(this,t)}},dt=class extends h{constructor(t,n){super(),this.fn=t,this.value=n}push(t){let n=this.fn;this.value=n(this.value,t),m(this,this.value)}},mt=class extends h{constructor(t,n=1/0){super(),this.index=-t,this.indexEnd=n-t}push(t){++this.index>0&&m(this,t),this.index===this.indexEnd&&this.stop()}},wt=class extends h{constructor(t){super(),this.chunk=[],typeof t=="number"?this.n=t:this.fn=t}fn(){return this.chunk.length===this.n}push(t){let n=this.chunk;this.fn(t)?(m(this,n),this.chunk=[]):n.push(t)}};var mn={fullscreenchange:Et(()=>"fullscreenElement"in document?"fullscreenchange":"webkitFullscreenElement"in document?"webkitfullscreenchange":"mozFullScreenElement"in document?"mozfullscreenchange":"msFullscreenElement"in document?"MSFullscreenChange":"fullscreenchange")},me=0;window.addEventListener("click",e=>me=e.timeStamp);function bt(e){var t={};return function(s){return s in t?t[s]:t[s]=e(s)}}function W(e){return function(n,...s){var i=e[n]||e.default;return i&&i.apply(this,s)}}var we={xml:"application/xml",html:"text/html",svg:"image/svg+xml"};function gt(e,t){if(t){var n=we[e.toLowerCase()]||e,s;try{s=new window.DOMParser().parseFromString(t,n)}catch{return}if(!s||s.getElementsByTagName("parsererror").length)throw new Error("Invalid "+e.toUpperCase()+": "+t);return s}}function Mt(e){return gt("html",e)}function It(e){return gt("svg",e)}var y=Object.assign,O={headers:function(e){return{}},body:C},ve=W({"application/x-www-form-urlencoded":function(e){return y(e,{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"})},"application/json":function(e){return y(e,{"Content-Type":"application/json; charset=utf-8","X-Requested-With":"XMLHttpRequest"})},"multipart/form-data":function(e){return y(e,{"Content-Type":"multipart/form-data","X-Requested-With":"XMLHttpRequest"})},"audio/wav":function(e){return y(e,{"Content-Type":"audio/wav","X-Requested-With":"XMLHttpRequest"})},"image/png":function(e){return y(e,{"Content-Type":"image/png","X-Requested-With":"XMLHttpRequest"})},"image/jpg":function(e){return y(e,{"Content-Type":"image/jpg","X-Requested-With":"XMLHttpRequest"})},"image/jpeg":function(e){return y(e,{"Content-Type":"image/jpeg","X-Requested-With":"XMLHttpRequest"})},default:function(e){return y(e,{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"})}}),be=W({"application/json":function(e){return e instanceof FormData?ge(e):JSON.stringify(e)},"application/x-www-form-urlencoded":function(e){return e instanceof FormData?Nt(e):Ht(e)},"multipart/form-data":function(e){return e instanceof FormData?e:ye(e)},default:C});function ge(e){return JSON.stringify(Array.from(e.entries()).reduce(function(t,n){return t[n[0]]=n[1],t},{}))}function Nt(e){return new URLSearchParams(e).toString()}function Ht(e){return Object.keys(e).reduce((t,n)=>(t.append(n,e[n]),t),new URLSearchParams)}function ye(e){throw new Error("TODO: dataToFormData(data)")}function xe(e,t){return t instanceof FormData?e+"?"+Nt(t):e+"?"+Ht(t)}function Ee(e,t,n,s){let i=typeof n=="string"?n:n&&n["Content-Type"]||"application/json",a=ve(i,y(O.headers&&t?O.headers(t):{},typeof n=="string"?{}:n)),w={method:e,mode:"cors",headers:a,credentials:"same-origin",signal:s&&s.signal};return e!=="GET"&&(w.body=be(i,O.body?O.body(t):t)),w}function $(e){return e.blob()}function Te(e){return e.json().catch(t=>{throw new Error("Cannot parse JSON "+e.url+". "+t.message)})}function Pt(e){return e.formData()}function Ae(e){return e.text()}function Se(e){return e.text().then(t=>/^\s*<!DOCTYPE html>/.test(t)?Mt(t):R("fragment",t))}function qe(e){return e.text().then(t=>/^\s*<\?xml/.test(t)?It(t):(console.warn("Untested SVG fragment parsing in request.js!"),R("fragment",t)))}var Be={"text/plain":Ae,"text/html":Se,"image/svg+xml":qe,"application/json":Te,"multipart/form-data":Pt,"application/x-www-form-urlencoded":Pt,audio:$,"audio/wav":$,"audio/m4a":$,"application/zip":$};function ke(e){if(O.onresponse&&(e=O.onresponse(e)),!e.ok)throw new Error(e.statusText+"");let t=e.headers.get("Content-Type");if(!t)return;let n=t.replace(/\;.*$/,"");return Be[n](e)}function Xt(e="GET",t,n={},s="application/json"){e=e.toUpperCase(),e==="GET"&&n&&(t=xe(t,n));let i=Ee(e,n,s,arguments[4]);return fetch(t,i).then(ke)}function zt(e){return Xt("GET",e)}var Re={chord:3,note:3,key:1,meter:2,rate:1,lyric:2},je=/^[ABCDEFG][b♭#♯]{0,1}-?\d$/,Jt=/^[ABCDEFG][b♭#♯]{0,1}/;function yt(e){let t=e.trim().split(/\s+/),n=[],s=-1;for(;t[++s]!==void 0;){let i=Number(t[s]),a=t[++s];je.test(a)?(a="note",--s):Jt.test(a)&&(a="chord",--s);let w=[i,a],v=Re[a];if(v===void 0)throw new TypeError('Unrecognised type "'+a+'" in sequence data');if(a==="chord"){let d=Jt.exec(t[++s])[0],x=t[s].slice(d.length)||t[++s],b=Number(t[++s]);w.push(d,x,b)}else for(;v--;){let d=Number(t[++s]);w.push(Number.isNaN(d)?t[s]:d)}n.push(w)}return n}function De(e){let t=e.files[Object.keys(e.files)[0]];return B(t.type,t.content)}function Oe(e){let t=e.settings.find(matches({id:13324}))||e.settings[0];return B("abc",t.abc)}function B(e,t){if(typeof t=="object")return t.files?De(t):t.settings?Oe():Array.isArray(t)?{id:0,events:t}:t;if(e==="sequence"||e==="text/plain")return{events:yt(t)};{let n=JSON.parse(t);return Array.isArray(n)?{id:0,events:n}:n}}var Ce=bt(zt);var Vt=E((e,t)=>typeof t,{string:function(e,t){return Ce(t).then(n=>B(e,n)).catch(n=>console.error(n))},default:function(e,t,n,s){t[e]=s}});var Le=/^(\d+)\/(\d+)$/;function Wt(e){let t=Le.exec(e),n=parseInt(t[1],10),s=4/parseInt(t[2],10);return{1:"meter",2:n*s,3:s}}function $t(e){let t=e[2],n=e[3],s=t/n,i=4/n;return s+"/"+i}var Kt=Object.assign,Ue=Object.defineProperties,Ge=new URL("shadow.css",import.meta.url),K=c.of(),Fe=[],Qt=new ResizeObserver(e=>{for(let t of e)o(t.target).shadowRoot.querySelectorAll(".beam").forEach(Y)}),Qn=Ue(ut("scribe-music",{shadow:`
        <link rel="stylesheet" href="${Ge}" />
        <!--div class="side" id="side">
            <div class="treble-stave open-stave stave side-bar bar">
                <span class="treble-clef clef"></span>
                <span data-pitch="B♭" class="acci acci-flat"></span>
                <span data-pitch="E♭" class="acci acci-flat"></span>
                <span data-pitch="A♭" class="acci acci-flat"></span>
            </div>
            <div class="treble-stave open-stave stave side-bar bar">
                <span class="treble-clef clef"></span>
                <span data-pitch="B♭" class="acci acci-flat"></span>
                <span data-pitch="E♭" class="acci acci-flat"></span>
                <span data-pitch="A♭" class="acci acci-flat"></span>
            </div>
            <div class="treble-stave open-stave stave side-bar bar">
                <span class="treble-clef clef"></span>
                <span data-pitch="B♭" class="acci acci-flat"></span>
                <span data-pitch="E♭" class="acci acci-flat"></span>
                <span data-pitch="A♭" class="acci acci-flat"></span>
            </div>
            <div class="treble-stave open-stave stave side-bar bar">
                <span class="treble-clef clef"></span>
                <span data-pitch="B♭" class="acci acci-flat"></span>
                <span data-pitch="E♭" class="acci acci-flat"></span>
                <span data-pitch="A♭" class="acci acci-flat"></span>
            </div>
            <div class="treble-stave open-stave stave side-bar bar">
                <span class="treble-clef clef"></span>
                <span data-pitch="B♭" class="acci acci-flat"></span>
                <span data-pitch="E♭" class="acci acci-flat"></span>
                <span data-pitch="A♭" class="acci acci-flat"></span>
            </div>
            <div class="treble-stave open-stave stave side-bar bar">
                <span class="treble-clef clef"></span>
                <span data-pitch="B♭" class="acci acci-flat"></span>
                <span data-pitch="E♭" class="acci acci-flat"></span>
                <span data-pitch="A♭" class="acci acci-flat"></span>
            </div>
            <div class="treble-stave open-stave stave side-bar bar">
                <span class="treble-clef clef"></span>
                <span data-pitch="B♭" class="acci acci-flat"></span>
                <span data-pitch="E♭" class="acci acci-flat"></span>
                <span data-pitch="A♭" class="acci acci-flat"></span>
            </div>
            <div class="treble-stave open-stave stave side-bar bar">
                <span class="treble-clef clef"></span>
                <span data-pitch="B♭" class="acci acci-flat"></span>
                <span data-pitch="E♭" class="acci acci-flat"></span>
                <span data-pitch="A♭" class="acci acci-flat"></span>
            </div>
            <div class="treble-stave open-stave stave side-bar bar">
                <span class="treble-clef clef"></span>
                <span data-pitch="B♭" class="acci acci-flat"></span>
                <span data-pitch="E♭" class="acci acci-flat"></span>
                <span data-pitch="A♭" class="acci acci-flat"></span>
            </div>
            <div class="treble-stave open-stave stave side-bar bar">
                <span class="treble-clef clef"></span>
                <span data-pitch="B♭" class="acci acci-flat"></span>
                <span data-pitch="E♭" class="acci acci-flat"></span>
                <span data-pitch="A♭" class="acci acci-flat"></span>
            </div>
            <div class="treble-stave open-stave stave side-bar bar">
                <span class="treble-clef clef"></span>
                <span data-pitch="B♭" class="acci acci-flat"></span>
                <span data-pitch="E♭" class="acci acci-flat"></span>
                <span data-pitch="A♭" class="acci acci-flat"></span>
            </div>
        </div-->
    `,construct:function(e,t){let n=e.querySelector("link");Fe.push(s=>n.href=s),K.value&&(n.href=K.value),t.data=c.of(),t.clef=c.of("treble"),t.key=c.of("C"),t.meter=c.of([-4,"meter",4,1]),t.beat=c.of(0),t.duration=c.of(1/0),t.transpose=c.of(0),t.swingAsStraight8ths=c.of(!1),t.swingAsStraight16ths=c.of(!1),t.debug=c.of(!1),t.isSafari=navigator.userAgent.includes("AppleWebKit/")&&!navigator.userAgent.includes("Chrome/")&&!navigator.userAgent.includes("Edge/")&&!navigator.userAgent.includes("Gecko/")},connect:function(e,t){if(t.isSafari&&this.classList.add("safari"),Qt.observe(this,{box:"content-box"}),!this.src){let n=this.textContent.trim();t.data.value=B(this.type,n)}return c.frame(()=>{let n=t.data.value&&St(t.data.value,t.clef.value,t.key.value,t.meter.value,t.duration.value,t.transpose.value,t.beat.value,Kt({},At,{swingAsStraight8ths:t.swingAsStraight8ths.value,swingAsStraight16ths:t.swingAsStraight16ths.value}));e.querySelectorAll(".bar").forEach(s=>s.remove()),e.append.apply(e,n),e.querySelectorAll(".beam").forEach(Y),t.debug.value&&e.querySelectorAll(".bar").forEach(s=>{let i=parseFloat(s.dataset.duration),a=0,w,v;s.querySelector(".BARREPEAT")||(s.querySelectorAll(".rest[data-duration], .note[data-duration]").forEach(d=>{w!==parseFloat(d.dataset.beat)&&(w=parseFloat(d.dataset.beat),v=parseFloat(d.dataset.duration),a+=v)}),Math.round(a/.0625)!==Math.round(i/.0625)&&s.classList.add("error"))})})},disconnect:function(){Qt.unobserve(this)}},{clef:{attribute:function(e){this.clef=e},get:function(){return o(this).clef.value},set:function(e){if(!Tt[e]){console.warn('<scribe-music> Attempt to set invalid clef="'+e+'" ignored');return}o(this).clef.value=e}},key:{attribute:function(e){this.key=e===""?"C":e},get:function(){return o(this).key.value},set:function(e){let t=o(this);if(typeof e!="string"||!/^[A-G][#b♯♭]?$/.test(e)){console.warn('<scribe-music> Attempt to set invalid key="'+e+'" ignored');return}t.key.value=e.replace(/[#b]$/,n=>n==="#"?"♯":"♭")}},meter:{attribute:function(e){this.meter=e===""?"4/4":e},get:function(){return $t(o(this).meter.value)},set:function(e){o(this).meter.value=Kt([0],Wt(e))}},beat:{attribute:function(e){this.beat=e},get:function(){return o(this).beat.value},set:function(e){o(this).beat.value=typeof e=="number"?e:parseFloat(e)}},duration:{attribute:function(e){this.duration=e},get:function(){return o(this).duration.value},set:function(e){o(this).duration.value=typeof e=="number"?e:parseFloat(e)}},transpose:{attribute:function(e){this.transpose=e},get:function(){return o(this).transpose.value},set:function(e){o(this).transpose.value=typeof e=="number"?Math.round(e):parseInt(e,10)}},type:{attribute:function(e){this.type=e},writable:!0,value:"application/json"},src:{attribute:function(e){this.src=e},get:function(){return o(this).src},set:function(e){let t=o(this);t.src=e;let n=new URL(e,window.location);if(window.location.origin===n.origin&&window.location.pathname===n.pathname){let s=this.getRootNode().getElementById(n.hash.slice(1));if(!s)throw new Error('<scribe-music> src script "'+e+'" not found in document');this.data=JSON.parse(s.textContent)}else Vt(this.type,n.href).then(s=>this.data=s)},default:null},data:{get:function(){return o(this).data.value},set:function(e){o(this).data.value=e},default:null},swing:{attribute:function(e){o(this).swingAsStraight8ths.value=e!==null}},shuffle:{attribute:function(e){o(this).swingAsStraight16ths.value=e!==null}},debug:{attribute:function(e){this.debug=e!==null},get:function(){return o(this).debug.value},set:function(e){o(this).debug.value=!!e}}},null,"github.com/stephband/scribe/"),{stylesheet:{set:e=>K.value=e,get:()=>K.value}});export{Qn as default};
//# sourceMappingURL=element.js.map
